{% extends 'base.html' %}

{% block content %}
    <div class="row">
        <form method="POST" class="col s12">
            <div class="row">
                <div class="input-field col s12">
                    <label for="title">Titulo</label>
                    <input type="text" name="title" value="{{ book.title|default('', true) }}" required>
                </div>
            </div>
            
            <div class="row">
                <div class="input-field col s12 m6">
                    <select name="author">
                        <option value="" disabled selected>Escolha o autor</option>
                        {% for author in authors %}
                            <option value="{{ author.id }}" {% if book.author %} {% if book.id == author.id %} selected {% endif %}{% endif %}>{{ author.name }}</option>
                        {% endfor %}
                    </select>
                    <label>Autor</label>
                </div>

                <div class="input-field col s12 m6">
                    <label for="publisher">Editora</label>
                    <input type="text" name="publisher" value="{{ book.publisher|default('', true) }}">
                </div>
            </div>
            
            <div class="row">
                <div class="input-field col s12 m6">
                    <label for="edition">Edição</label>
                    <input type="number" name="edition" value="{{ book.edition|default('', true) }}">
                </div>
                <div class="input-field col s12 m6">
                    <label for="pages_number">Número de Páginas</label>
                    <input type="number" name="pages_number" value="{{ book.pages_number|default('', true) }}" required>
                </div>
            </div>
            
            <div class="row">
                <div class="input-field col s12 m6">
                    <label for="img_url">Link da Imagem</label>
                    <input type="url" name="img_url" value="{{ book.img_url|default('', true) }}">
                </div>

                <div class="input-field col s12 m6">
                    <label for="isbn">ISBN</label>
                    <input type="text" name="isbn" value="{{ book.isbn|default('', true) }}">
                </div>
            </div>

            <div class="row">
                <div class="input-field col s12">
                    <textarea class="materialize-textarea" name="description">{{ book.description|default('', false) }}</textarea>
                    <label for="description">Descrição</label>
                </div>
            </div>
            
            <button type="submit" class="btn waves-effect waves-light">
                Submeter <i class="material-icons right">send</i>
            </button>
        </form>
    </div>
{% endblock %}

{% block script %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('select');
            var instances = M.FormSelect.init(elems);
        });
    </script>
{% endblock %}
